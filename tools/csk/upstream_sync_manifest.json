{
  "source": "https://github.com/ainazemtsau/hestia_code_assistant",
  "notes": [
    "Conservative sync list for CSK workflow assets.",
    "Runtime files under modules/*/.csk/**/run are intentionally excluded."
  ],
  "pack_version": "2026.02.20",
  "migration_notes": "Core CSK workflow pack update: mandatory post-update migration checks and legacy artifact reconciliation.",
  "migration_steps": [
    {
      "id": "plan-summary-contract",
      "title": "Introduce short plan shareable contract",
      "introduced_in": "2026.02.19",
      "scope": "global",
      "required": true,
      "summary": "All new tasks create `plan.summary.md` and chat assistants must share only the short summary plus `plan.md` links.",
      "actions": [
        "Update `templates/task/plan.md` with machine-readable short-plan markers.",
        "Keep `plan.md` as technical source and generate `plan.summary.md` on `new-task`/`freeze-plan`.",
        "Use short-only output in csk/csk-module chat responses."
      ],
      "compatibility": [
        "If a project intentionally keeps legacy chat style, this step can be partial, but `plan.summary.md` must still exist for each task."
      ],
      "docs": "docs/csk-update-changelog.md#plan-summary"
    },
    {
      "id": "user-check-gate",
      "title": "Enforce mandatory user-check gate before READY",
      "introduced_in": "2026.02.19",
      "scope": "global",
      "required": true,
      "summary": "AI cannot mark functional readiness without explicit user acceptance proof (`record-user-check`).",
      "actions": [
        "Keep `USER_ACCEPTANCE_START/END` block in each `plan.md`.",
        "Generate `user_acceptance.md` for manual checks.",
        "Require `approvals/user-check.json` with `result=\"pass\"` in validate-ready flow.",
        "Align csk and csk-module SKILL guides to request this sequence."
      ],
      "compatibility": [
        "If module never performs runtime manual verification, keep the flow explicit and document the reason in task notes.",
        "If a module is non-functional, this gate can be marked waived through migration record."
      ],
      "docs": "docs/csk-update-changelog.md#user-check"
    },
    {
      "id": "csk-upstream-migration-trace",
      "title": "Track update pack version and mandatory migration artifact",
      "introduced_in": "2026.02.19",
      "scope": "app",
      "required": true,
      "summary": "Track pack migration state and force post-update check after `csk-update` completion.",
      "actions": [
        "Write `.csk-app/sync/state.json.current_pack_version` from manifest.",
        "Generate migration artifact under `.csk-app/sync/migrations/` on apply.",
        "Run `python tools/csk/sync_upstream.py migration-status --migration-strict` after update.",
        "Acknowledge migration with `migration-ack` before full validation continues."
      ],
      "compatibility": [
        "Projects that do not use CSK overlay or app-level sync can keep this file as metadata-only and skip functional migration steps."
      ],
      "docs": "docs/csk-upstream-update.md"
    },
    {
      "id": "csk-ready-pack-gate",
      "title": "Block READY until migration is acknowledged",
      "introduced_in": "2026.02.20",
      "scope": "app",
      "required": true,
      "summary": "Prevent READY/approve-ready from completing while migration is pending after updater changes.",
      "actions": [
        "Run `python tools/csk/sync_upstream.py migration-status --migration-strict` after any updater run.",
        "Acknowledge migration before any task is validated as READY.",
        "Run `python tools/csk/csk.py reconcile-task-artifacts` after updater changes when older tasks lack shareable artifacts."
      ],
      "compatibility": [
        "Legacy projects can temporarily run with `--json` migration check output and one-off reconciliation command before enabling strict ready policy."
      ],
      "docs": "docs/csk-update-changelog.md"
    }
  ],
  "sync_paths": [
    {
      "path": ".agents/skills/csk",
      "required": true,
      "merge_mode": "overlay_allowed"
    },
    {
      "path": ".agents/skills/control-tower",
      "required": false,
      "merge_mode": "overlay_allowed"
    },
    {
      "path": ".agents/skills/csk-critic",
      "required": false,
      "merge_mode": "overlay_allowed"
    },
    {
      "path": ".agents/skills/csk-doctor",
      "required": false,
      "merge_mode": "overlay_allowed"
    },
    {
      "path": ".agents/skills/csk-reviewer",
      "required": false,
      "merge_mode": "overlay_allowed"
    },
    {
      "path": ".agents/skills/csk-update",
      "required": false,
      "merge_mode": "overlay_allowed"
    },
    {
      "path": ".csk-app/registry.json",
      "required": false,
      "merge_mode": "overlay_allowed"
    },
    {
      "path": "tools/csk",
      "required": true,
      "merge_mode": "overlay_allowed"
    },
    {
      "path": "schemas",
      "required": false,
      "merge_mode": "overlay_allowed"
    },
    {
      "path": "templates",
      "required": false,
      "merge_mode": "overlay_allowed"
    },
    {
      "path": "AGENTS.md",
      "required": false,
      "merge_mode": "overlay_allowed"
    },
    {
      "path": "README_CSKM_PRO.md",
      "required": false,
      "merge_mode": "overlay_allowed"
    }
  ]
}
